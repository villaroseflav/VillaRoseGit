<div id="canvas" class="fixed inset-0 z-10 flex items-center justify-center overflow-y-auto bg-gray-500 bg-opacity-75" (click)="closeDialog()">
    <div class="relative w-full rounded-lg bg-white p-6 dark:bg-gray-800 sm:w-96" (click)="stopPropagation($event)">
        <button class="absolute right-6 top-6 font-bold dark:text-gray-300" (click)="closeDialog()">
            <app-icon [icon]="{'name':'close', 'color':''}"></app-icon>
        </button>
        <h2 class="mb-4 text-lg font-semibold dark:text-gray-300">{{ editing ? 'Edit' : 'Create' }} Device</h2>
        <div class="mb-4">
            <label class="label" for="deviceName">Name</label>
            <input
            id="deviceName"
            [(ngModel)]="device.name"
            class="inputfield focus:shadow-outline dark:focus:shadow-outline-gray w-full appearance-none rounded border px-3 py-2 leading-tight text-gray-700 shadow focus:outline-none dark:text-gray-300"
            />
        </div>

        <div class="mb-4">
            <label class="label" for="deviceDomain">Domain</label>
            <input
                id="deviceDomain"
                [(ngModel)]="device.domain"
                class="inputfield focus:shadow-outline dark:focus:shadow-outline-gray w-full appearance-none rounded border px-3 py-2 leading-tight text-gray-700 shadow focus:outline-none dark:text-gray-300"
                required
            />
        </div>

        <div class="mb-4">
            <label class="label" for="deviceEndpoint">Endpoint</label>
            <input
                id="deviceEndpoint"
                [(ngModel)]="device.endpoint"
                class="inputfield focus:shadow-outline dark:focus:shadow-outline-gray w-full appearance-none rounded border px-3 py-2 leading-tight text-gray-700 shadow focus:outline-none dark:text-gray-300"
                required
            />
        </div>

        <div class="mb-4">
            <label class="label" for="deviceSsid">SSID</label>
            <input
                id="deviceSsid"
                [(ngModel)]="device.ssid"
                class="inputfield focus:shadow-outline dark:focus:shadow-outline-gray w-full appearance-none rounded border px-3 py-2 leading-tight text-gray-700 shadow focus:outline-none dark:text-gray-300"
                required
            />
        </div>

        <div class="mb-4 relative">
            <label class="label" for="devicePassword">Password</label>
            <input
                id="devicePassword"
                [(ngModel)]="device.password"
                class="inputfield focus:shadow-outline dark:focus:shadow-outline-gray w-full appearance-none rounded border px-3 py-2 leading-tight text-gray-700 shadow focus:outline-none dark:text-gray-300"
                [type]="passwordVisible ? 'text': 'password'"
                required
            />
            <button 
                type="button" 
                (click)="togglePasswordVisibility()"
                class="absolute right-3 top-1/2 transform -translate-y-1 text-gray-600 dark:text-gray-300"
            >
                <app-icon [icon]="passwordVisible ? {'name': 'eye-slash', 'color': ''} : {'name': 'eye', 'color': ''}"></app-icon>
            </button>
        </div>

        <div class="flex items-center justify-between">
            <button class="btn-cancel font-bold text-gray-700 hover:text-blue-800 dark:text-gray-300" (click)="closeDialog()">
            Cancel
            </button>
            <div class="flex space-x-4">
                <button
                    (click)="onDelete()"
                    *ngIf="editing"
                    class="delete focus:shadow-outline dark:focus:shadow-outline-gray rounded bg-red-600 px-4 py-2 font-bold text-white hover:bg-red-700 focus:outline-none dark:bg-red-700 dark:hover:bg-red-600"
                    type="button"
                >
                    Delete
                </button>
                <button
                    (click)="onSave()"
                    class="btn-confirm focus:shadow-outline dark:focus:shadow-outline-gray rounded bg-blue-600 px-4 py-2 font-bold text-white hover:bg-blue-700 focus:outline-none dark:bg-blue-700 dark:hover:bg-blue-600"
                    type="button"
                >
                    Confirm
                </button>
            </div>
        </div>
    </div>
</div>